{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/shariati/Desktop/Projects/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Axios from'axios';import{Container,Row,Col,Table,Form,Card}from'react-bootstrap';import NumberFormat from'react-number-format';import ReactGA from'react-ga';import Pagination from'./pagination';import Loader from'react-loader-spinner';var colors={confirmed:'#FFD31D',recovered:'#21BF72',deaths:'#DD2C00'};var showChartPeriod=[{period:7,periodTitle:\"Sow Last 7 Days Data\"},{period:14,periodTitle:\"Sow Last 14 Days Data\"},{period:30,periodTitle:\"Sow Last 30 Days Data\"},{period:60,periodTitle:\"Sow Last 60 Days Data\"},{period:90,periodTitle:\"Sow Last 90 Days Data\"},{period:120,periodTitle:\"Sow Last 120 Days Data\"}];var DataChart=/*#__PURE__*/function(_Component){_inherits(DataChart,_Component);var _super=_createSuper(DataChart);function DataChart(props){var _this;_classCallCheck(this,DataChart);_this=_super.call(this,props);_this.state={currentData:[],currentPage:1,dataPerPage:7,selectedCountry:\"China\",population:0,temp:[],countries:[],tableCountries:[],width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};_this.updateDimensions=function(){var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;_this.setState({width:width});};_this.getData=_this.getData.bind(_assertThisInitialized(_this));_this.getCountry=_this.getCountry.bind(_assertThisInitialized(_this));_this.updateChartPeriod=_this.updateChartPeriod.bind(_assertThisInitialized(_this));_this.paginate=_this.paginate.bind(_assertThisInitialized(_this));return _this;}_createClass(DataChart,[{key:\"componentDidMount\",value:function componentDidMount(){ReactGA.initialize('UA-163115935-1');ReactGA.pageview('/Daily-Data');this.getCountryByIP();window.addEventListener('resize',this.updateDimensions);}},{key:\"getCountryByIP\",value:function(){var _getCountryByIP=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"https://ipapi.co/json\");case 2:res=_context.sent;this.setState({selectedCountry:res.data.country_name===\"United States\"?\"US\":res.data.country_name,population:res.data.country_population});this.getData();case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getCountryByIP(){return _getCountryByIP.apply(this,arguments);}return getCountryByIP;}()},{key:\"getData\",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,selectedCountry,byConfirmed,indexOfLastData,indexOfFirstData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.get(\"https://pomber.github.io/covid19/timeseries.json\");case 2:res=_context2.sent;selectedCountry=this.state.selectedCountry;byConfirmed=res.data[selectedCountry].slice(0);byConfirmed.sort(function(a,b){return b.confirmed-a.confirmed;});this.setState({countries:res.data[selectedCountry],tableCountries:byConfirmed,temp:Object.keys(res.data)});indexOfLastData=this.state.currentPage*this.state.dataPerPage;indexOfFirstData=indexOfLastData-this.state.dataPerPage;this.setState({currentData:this.state.tableCountries.slice(indexOfFirstData,indexOfLastData)});case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function getData(){return _getData.apply(this,arguments);}return getData;}()},{key:\"getCountry\",value:function(){var _getCountry=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var countryRes,searchCountry,byConfirmed,indexOfLastData,indexOfFirstData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.persist();_context3.next=3;return Axios.get(\"https://pomber.github.io/covid19/timeseries.json\");case 3:countryRes=_context3.sent;searchCountry=event.target.value;byConfirmed=countryRes.data[searchCountry].slice(0);byConfirmed.sort(function(a,b){return b.confirmed-a.confirmed;});this.setState({selectedCountry:searchCountry,tableCountries:byConfirmed});indexOfLastData=this.state.currentPage*this.state.dataPerPage;indexOfFirstData=indexOfLastData-this.state.dataPerPage;this.setState({currentData:this.state.tableCountries.slice(indexOfFirstData,indexOfLastData)});case 11:case\"end\":return _context3.stop();}}},_callee3,this);}));function getCountry(_x){return _getCountry.apply(this,arguments);}return getCountry;}()},{key:\"updateChartPeriod\",value:function updateChartPeriod(event){event.persist();this.setState({dataPerPage:event.target.value});this.getData();//console.log(event.target.value);\n}},{key:\"updatePageNumber\",value:function(){var _updatePageNumber=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var countryRes,searchCountry,byConfirmed,indexOfLastData,indexOfFirstData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Axios.get(\"https://pomber.github.io/covid19/timeseries.json\");case 2:countryRes=_context4.sent;searchCountry=this.state.selectedCountry;byConfirmed=countryRes.data[searchCountry].slice(0);byConfirmed.sort(function(a,b){return b.confirmed-a.confirmed;});this.setState({selectedCountry:searchCountry,tableCountries:byConfirmed});indexOfLastData=this.state.currentPage*this.state.dataPerPage;indexOfFirstData=indexOfLastData-this.state.dataPerPage;this.setState({currentData:this.state.tableCountries.slice(indexOfFirstData,indexOfLastData)});case 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function updatePageNumber(){return _updatePageNumber.apply(this,arguments);}return updatePageNumber;}()//paginate = pageNumber=> this.setState({currentPage:pageNumber});\n},{key:\"paginate\",value:function paginate(pageNumber){this.setState({currentPage:pageNumber});this.updatePageNumber();}},{key:\"render\",value:function render(){var _this$state=this.state,currentData=_this$state.currentData,dataPerPage=_this$state.dataPerPage,selectedCountry=_this$state.selectedCountry,population=_this$state.population,temp=_this$state.temp,tableCountries=_this$state.tableCountries,width=_this$state.width;if(!currentData)return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Col,{xs:\"12\",lg:\"8\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow\",style:{marginBottom:'1rem',paddingTop:'15rem',border:'none',minHeight:\"700px\"}},/*#__PURE__*/React.createElement(Loader,{type:\"ThreeDots\",color:\"#DD2C00\",height:100,width:100,timeout:900000000})))));return/*#__PURE__*/React.createElement(\"div\",{className:\"mid\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Col,{xs:\"12\",lg:\"8\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow-sm\",style:{marginBottom:'1rem',padding:'1rem',border:'none'}},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",size:\"sm\",onChange:this.getCountry,custom:true},/*#__PURE__*/React.createElement(\"option\",null,selectedCountry),temp.map(function(items,i){return/*#__PURE__*/React.createElement(\"option\",{key:i},items);}))))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Col,{xs:\"12\",lg:\"8\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow-sm\",style:{marginBottom:'1rem',padding:'1rem',border:'none'}},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",size:\"sm\",onChange:this.updateChartPeriod,custom:true},showChartPeriod.map(function(items,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:items.period},items.periodTitle);})))))),/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Col,{xs:true,lg:\"8\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow-sm\",style:{marginTop:'1rem',padding:'1rem',border:'none'}},/*#__PURE__*/React.createElement(Table,{responsive:true,size:\"sm\",striped:true,bordered:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Confirmed\"),/*#__PURE__*/React.createElement(\"th\",null,\"Recovered\"),/*#__PURE__*/React.createElement(\"th\",null,\"Deaths\"))),/*#__PURE__*/React.createElement(\"tbody\",null,currentData.map(function(list,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,list.date),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(NumberFormat,{value:list.confirmed,displayType:'text',thousandSeparator:true})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(NumberFormat,{value:list.recovered,displayType:'text',thousandSeparator:true})),/*#__PURE__*/React.createElement(\"td\",{style:{fontWeight:\"bold\"}},/*#__PURE__*/React.createElement(NumberFormat,{value:list.deaths,displayType:'text',thousandSeparator:true})));}))),/*#__PURE__*/React.createElement(Pagination,{dataPerPage:dataPerPage,totalData:tableCountries.length,paginate:this.paginate}))))));}}]);return DataChart;}(Component);export default DataChart;","map":{"version":3,"sources":["/Users/shariati/Desktop/Projects/demo2/src/components/dataChart.jsx"],"names":["React","Component","Axios","Container","Row","Col","Table","Form","Card","NumberFormat","ReactGA","Pagination","Loader","colors","confirmed","recovered","deaths","showChartPeriod","period","periodTitle","DataChart","props","state","currentData","currentPage","dataPerPage","selectedCountry","population","temp","countries","tableCountries","width","window","innerWidth","document","documentElement","clientWidth","body","updateDimensions","setState","getData","bind","getCountry","updateChartPeriod","paginate","initialize","pageview","getCountryByIP","addEventListener","get","res","data","country_name","country_population","byConfirmed","slice","sort","a","b","Object","keys","indexOfLastData","indexOfFirstData","event","persist","countryRes","searchCountry","target","value","pageNumber","updatePageNumber","marginBottom","paddingTop","border","minHeight","padding","map","items","i","index","marginTop","list","date","fontWeight","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Axios from 'axios';\nimport {Container,Row,Col,Table,Form, Card} from 'react-bootstrap';\nimport NumberFormat from 'react-number-format';\nimport ReactGA from 'react-ga';\nimport Pagination from './pagination';\nimport Loader from 'react-loader-spinner';\n\nconst colors = {\n    confirmed: '#FFD31D',\n    recovered: '#21BF72',\n    deaths: '#DD2C00',\n  };\n\n  const showChartPeriod=[\n    {\n        period:7,\n        periodTitle:\"Sow Last 7 Days Data\"\n    },\n    {\n        period:14,\n        periodTitle:\"Sow Last 14 Days Data\"\n    },\n    {\n        period:30,\n        periodTitle:\"Sow Last 30 Days Data\"\n    },\n    {\n        period:60,\n        periodTitle:\"Sow Last 60 Days Data\"\n    },\n    {\n        period:90,\n        periodTitle:\"Sow Last 90 Days Data\"\n    },\n    {\n        period:120,\n        periodTitle:\"Sow Last 120 Days Data\"\n    }\n]\n\nclass DataChart extends Component{\n    constructor (props){\n        super(props);\n        this.getData=this.getData.bind(this);\n        this.getCountry=this.getCountry.bind(this);\n        this.updateChartPeriod=this.updateChartPeriod.bind(this);\n        this.paginate=this.paginate.bind(this);\n      }\n      \n      state={\n        currentData:[],\n        currentPage:1,\n        dataPerPage:7,\n        selectedCountry:\"China\",\n        population:0,\n        temp:[],\n        countries:[],\n        tableCountries:[],\n        width:\n        window.innerWidth ||\n        document.documentElement.clientWidth ||\n        document.body.clientWidth\n      }\n      componentDidMount(){\n\n        ReactGA.initialize('UA-163115935-1');\n        ReactGA.pageview('/Daily-Data');\n\n        this.getCountryByIP();\n        window.addEventListener('resize',this.updateDimensions);\n      }\n      updateDimensions = ()=>{\n          const width = \n          window.innerWidth ||\n          document.documentElement.clientWidth ||\n          document.body.clientWidth;\n\n          this.setState({width});\n      }\n      async getCountryByIP(){\n        const res=await Axios.get(\"https://ipapi.co/json\");\n        this.setState({\n            selectedCountry:res.data.country_name ===\"United States\" ? \"US\" : res.data.country_name,\n              population:res.data.country_population\n        })\n        this.getData();\n    }\n      async getData(){\n        const res=await Axios.get(\"https://pomber.github.io/covid19/timeseries.json\");\n        const selectedCountry=this.state.selectedCountry;\n        const byConfirmed=res.data[selectedCountry].slice(0);\n        byConfirmed.sort(function(a,b){\n            return b.confirmed - a.confirmed;\n        });\n\n        this.setState({\n          countries:res.data[selectedCountry],\n          tableCountries:byConfirmed,\n          temp:Object.keys(res.data)\n        })\n\n        const indexOfLastData=this.state.currentPage * this.state.dataPerPage;\n        const indexOfFirstData=indexOfLastData - this.state.dataPerPage;\n        this.setState({\n            currentData:this.state.tableCountries.slice(indexOfFirstData,indexOfLastData)\n        })\n        \n        \n      }\n      async getCountry(event){\n        event.persist();\n        const countryRes=await Axios.get(\"https://pomber.github.io/covid19/timeseries.json\");\n        const searchCountry=event.target.value;\n        \n        const byConfirmed=countryRes.data[searchCountry].slice(0);\n        byConfirmed.sort(function(a,b){\n            return b.confirmed - a.confirmed;\n        });\n\n        this.setState({\n            selectedCountry:searchCountry,\n            tableCountries:byConfirmed\n        })\n        const indexOfLastData=this.state.currentPage * this.state.dataPerPage;\n        const indexOfFirstData=indexOfLastData - this.state.dataPerPage;\n        this.setState({\n            currentData:this.state.tableCountries.slice(indexOfFirstData,indexOfLastData)\n        })\n      }\n\n      updateChartPeriod(event){\n        event.persist();\n        \n        this.setState({\n            dataPerPage:event.target.value,\n        })\n        this.getData();\n        //console.log(event.target.value);\n      }\n\n      async updatePageNumber(){\n        const countryRes=await Axios.get(\"https://pomber.github.io/covid19/timeseries.json\");\n        const searchCountry=this.state.selectedCountry;\n        \n        const byConfirmed=countryRes.data[searchCountry].slice(0);\n        byConfirmed.sort(function(a,b){\n            return b.confirmed - a.confirmed;\n        });\n\n        this.setState({\n            selectedCountry:searchCountry,\n            tableCountries:byConfirmed\n        })\n\n        \n\n        const indexOfLastData=this.state.currentPage * this.state.dataPerPage;\n        const indexOfFirstData=indexOfLastData - this.state.dataPerPage;\n        this.setState({\n            currentData:this.state.tableCountries.slice(indexOfFirstData,indexOfLastData)\n        })\n\n      }\n\n    //paginate = pageNumber=> this.setState({currentPage:pageNumber});\n        paginate(pageNumber){\n        this.setState({currentPage:pageNumber});\n        this.updatePageNumber();\n    }\n    \nrender(){\n    const {\n        currentData,\n        dataPerPage,\n        selectedCountry,\n        population,\n        temp,\n        tableCountries,\n        width\n    } = this.state;\n\n    if(!currentData) return (\n        <Container fluid>\n            <Row className=\"justify-content-md-center\">\n                <Col xs=\"12\" lg=\"8\">\n                <Card \n                    className=\"shadow\" \n                    style={{marginBottom:'1rem',paddingTop:'15rem',border:'none',minHeight:\"700px\"}}\n                >\n                    <Loader \n                        type=\"ThreeDots\"\n                        color=\"#DD2C00\"\n                        height={100}\n                        width={100}\n                        timeout={900000000}\n                    />\n                </Card>     \n                </Col>\n            </Row>\n\n            \n        </Container>\n    );\n\n    return(\n        <div className=\"mid\">\n            <Container fluid>\n                <Row className=\"justify-content-md-center\">\n                    <Col xs=\"12\" lg=\"8\">\n                    <Card className=\"shadow-sm\" style={{marginBottom:'1rem',padding:'1rem',border:'none'}}>\n                        <Form.Control as=\"select\" size=\"sm\" onChange={this.getCountry} custom>\n                                <option>{selectedCountry}</option> \n                                {\n                                temp.map((items,i)=>\n                                <option key={i}>{items}</option>  \n                                )\n                                }\n                            </Form.Control>\n                    </Card>     \n                    </Col>\n                </Row>\n\n                <Row className=\"justify-content-md-center\">\n                    <Col xs=\"12\" lg=\"8\">\n                    <Card className=\"shadow-sm\" style={{marginBottom:'1rem',padding:'1rem',border:'none'}}>\n                        <Form.Control as=\"select\" size=\"sm\" onChange={this.updateChartPeriod} custom>\n                                \n                                {\n                                showChartPeriod.map((items,index)=>\n                                <option key={index} value={items.period}>{items.periodTitle}</option>  \n                                )\n                                }\n                            </Form.Control>\n                    </Card>     \n                    </Col>\n                </Row>\n            </Container>\n            \n            <Container fluid>\n                <Row className=\"justify-content-md-center\">\n                    <Col xs lg=\"8\">\n                        <Card className=\"shadow-sm\" style={{marginTop:'1rem',padding:'1rem',border:'none'}}>\n                            <Table responsive size=\"sm\" striped={true} bordered={true} hover>\n                                <thead>\n                                    <tr>\n                                    <th>Date</th>\n                                    <th>Confirmed</th>\n                                    <th>Recovered</th>\n                                    <th>Deaths</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                    currentData.map((list,index)=>\n                                    <tr key={index}>\n                                    <td>{list.date}</td>\n                                    <td>\n                                        <NumberFormat \n                                            value={list.confirmed} \n                                            displayType={'text'} \n                                            thousandSeparator={true} \n                                        />\n                                        \n                                    </td>\n                                    <td>\n                                        <NumberFormat value={list.recovered} displayType={'text'} thousandSeparator={true} />\n                                    </td>\n                                    <td style={{fontWeight:\"bold\"}}>\n                                        <NumberFormat value={list.deaths} displayType={'text'} thousandSeparator={true} />\n                                    </td>\n                                    </tr>\n                                    )\n                                    }\n                                </tbody>\n                                </Table>\n                                <Pagination  \n                                    dataPerPage={dataPerPage} \n                                    totalData={tableCountries.length} \n                                    paginate={this.paginate}\n                                />\n                        </Card>\n                    \n                    </Col>\n                </Row>\n            </Container>\n            \n        </div>\n    )\n}\n}\nexport default DataChart;"]},"metadata":{},"sourceType":"module"}